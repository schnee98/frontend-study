# Query Invalidation, Invalidation from Mutations, Updates from Mutation Responses

1. invalidateQueries를 호출하면 발생하는 일을 설명해주세요

   _답_

- 쿼리가 오래된 상태로 표시됩니다. 이 오래된 상태는 useQuery 또는 관련 훅에서 사용하는 staleTime 구성을 무시합니다.
- 쿼리가 현재 useQuery 또는 관련 훅을 통해 렌더링 중일 경우, 백그라운드에서 다시 가져옵니다.
- 렌더링 중이 아니라면 다음번 useQuery가 호출될 때 데이터를 다시 가져옵니다.

2. Query Client의 setQueryData를 언제 사용하나요? 주의해야하는 점도 설명해주세요.

   _답_

- 이미 가지고 있는 데이터에 대해 네트워크 호출을 낭비하는 대신, 뮤테이션 함수가 반환한 객체를 활용하여 기존 쿼리를 새 데이터로 즉시 업데이트할 수 있습니다.

- 불변 방식으로 수행해야 합니다. 캐시에서 가져온 데이터를 직접 수정하면 안돼요.

3. UI를 낙관적으로 업데이트하는 두 가지 방법을 설명해주세요.

   _답_

- onMutate 옵션을 사용하여 캐시를 직접 업데이트
  화면에 여러 곳에서 업데이트를 알아야 하는 경우, 캐시를 직접 조작하는 것이 자동으로 이를 처리합니다.
- useMutation 결과에서 반환된 variables를 활용하여 UI를 업데이트
  낙관적인 결과를 표시해야 하는 곳이 하나만 있는 경우, variables를 사용하여 직접 UI를 업데이트하는 접근 방식이 코드가 적고 일반적으로 이해하기 쉽습니다.
